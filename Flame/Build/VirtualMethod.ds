using System;
using System.Collections.Generic;

namespace Flame.Build
{
	public abstract class VirtualMethod : TemplatedMethod
	{
		public this();
		public this(set IMethod Template);
	
		public override IBoundObject Invoke(IBoundObject Target, IEnumerable<IBoundObject> Arguments) : TemplatedMethod.Invoke
		{
			var impl = this.GetImplementation(Target.Type);
			if (impl != null)
			{
				return impl.Invoke(Target, Arguments);
			}
			else
			{
				return InvokeInternal(Target, Arguments);
			}
		}
		
		protected abstract IBoundObject InvokeInternal(IBoundObject Target, IEnumerable<IBoundObject> Arguments);
	}
}