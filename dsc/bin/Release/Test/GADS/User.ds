/// <summary>
/// Describes a registered customer at a movie theater.
/// </summary>
public class User : IRecord<int>
{
    /// <summary>
    /// Creates a new instance of a user with the provided information.
    /// </summary>
    public const this(set int Id, set string FirstName, set string LastName, set string EmailAddress);

    /// <summary>
    /// Gets the user's unique identifier.
    /// </summary>
    public int Id { const get; private set; }
    /// <summary>
    /// Gets the user's first name.
    /// </summary>
    public string FirstName { const get; private set; }
    /// <summary>
    /// Gets the user's last name.
    /// </summary>
    public string LastName { const get; private set; }
    /// <summary>
    /// Gets the user's full name.
    /// </summary>
    public string Name { const get return FirstName + " " + LastName; }
    /// <summary>
    /// Gets the user's email address.
    /// </summary>
    public string EmailAddress { const get; private set; }
    
    public int Key { const get return Id; }
    
    /// <summary>
    /// Gets the user's data as a string.
    /// </summary>
    public const string __str__()
    {
        return Id + ": " + Name + "(" + EmailAddress + ")";
    }
}

/// <summary>
/// Describes a reservation at a movie theater by a registered customer.
/// </summary>
public class Reservation : IRecord<int>
{
    public const this(set int Id, set User Customer, set Showtime Showtime, set DateTime Timestamp, set int NumberOfSeats);

    /// <summary>
    /// Gets the reservation's unique identifier.
    /// </summary>
    public int Id { const get; private set; }
    
    /// <summary>
    /// Gets the customer that has reserved a seat.
    /// </summary>
    public User Customer { const get; private set; }
    
    /// <summary>
    /// Gets the date and time at which the reservation was placed.
    /// </summary>
    public DateTime Timestamp { const get; private set; }
    
    /// <summary>
    /// Gets the showtime associated with this reservation.
    /// </summary>
    public Showtime Showtime { const get; private set; }
    
    /// <summary>
    /// Gets the number of seats reserved by the user.
    /// </summary>
    public int NumberOfSeats { const get; private set; }
    
    public int Key { const get return Id; }
}

/// <summary>
/// Describes a ticket at a movie theater.
/// </summary>
public class Ticket : IRecord<int>
{
    public const this(set User Customer);

    /// <summary>
    /// Gets the user that is associated with this ticket.
    /// </summary>
    public User Customer { const get; private set; }
    
    /// <summary>
    /// Gets the identifier of the user that is associated with this ticket.
    /// </summary>
    public int CustomerId { const get return Customer.Id; }
    
    public int Key { const get return CustomerId; }
}